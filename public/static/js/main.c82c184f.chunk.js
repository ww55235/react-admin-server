(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{1189:function(e,t,a){},1190:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),s=a(19),i=a(20),l=a(22),u=a(21),m=a(102),p=a(48),d=(a(72),a(26)),h=(a(122),a(32)),f=(a(95),a(42)),g=(a(123),a(7)),y=a(17),v=a.n(y),b=a(30),E=a(239),O=(a(103),a(34)),k=a(504),w=a.n(k),j=a(328),C=a.n(j),x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get";return new Promise((function(n,r){"get"===a?C.a.get(e,{params:t}).then((function(e){n(e.data)})).catch((function(e){O.a.error("\u8bf7\u6c42\u51fa\u9519\u4e86"+e.message)})):C.a.post(e,t).then((function(e){n(e.data)})).catch((function(e){O.a.error("\u8bf7\u6c42\u51fa\u9519\u4e86"+e.message)}))}))},S=function(e,t){return x("/login",{username:e,password:t},"post")},N=function(e){return x("/manage/user/"+(e._id?"update":"add"),e,"post")},_=function(e){return new Promise((function(t,a){var n="http://api.map.baidu.com/telematics/v3/weather?location=".concat(e,"&output=json&ak=3p49MVra6urFRGOT9s8UBWr2");w()(n,{},(function(e,a){if(e||"success"!==a.status)O.a.error("\u83b7\u53d6\u6570\u636e\u5931\u8d25");else{var n=a.results[0].weather_data[0],r=n.dayPictureUrl,o=n.weather;t({dayPictureUrl:r,weather:o})}}))}))},I=function(e){return x("/manage/category/list",{parentId:e})},A=function(e){var t=e.parentId,a=e.categoryName;return x("/manage/category/add",{parentId:t,categoryName:a},"POST")},F=function(e){var t=e.categoryId,a=e.categoryName;return x("/manage/category/update",{categoryId:t,categoryName:a},"POST")},T=function(e,t){return x("/manage/product/list",{pageNum:e,pageSize:t})},U=function(e){var t=e.pageNum,a=e.pageSize,n=e.searchName,r=e.searchType;return x("/manage/product/search",Object(E.a)({pageNum:t,pageSize:a},r,n))},M=function(e){return x("/manage/category/info",{categoryId:e})},D=function(e,t){return x("/manage/product/updateStatus",{productId:e,status:t},"post")},P=function(e){return x("/manage/img/delete",{name:e},"post")},R=function(e){return x("/manage/product/"+(e._id?"update":"add"),e,"post")},W=function(e){return x("/manage/role/add",{roleName:e},"post")},L=function(e){return x("/manage/role/update",e,"post")},V=function(){return x("/manage/user/list")},K=function(e){return x("/manage/user/delete",{userId:e},"post")},q=a(249),z=a.n(q),H=function(e){z.a.set("user_key",e)},B=function(){return z.a.get("user_key")||{}},J=function(){z.a.remove("user_key")},Q=function(e){return{type:"set_header_title",data:e}},X=function(){return J(),{type:"reset_user"}},G=function(e){return{type:"receive_user",user:e}},Y=a(63),Z=a(507),$=a.n(Z),ee=(a(611),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleValidator=function(e,t,a){t.length<4?a("\u7528\u6237\u540d\u4e0d\u80fd\u5c0f\u4e8e4\u4f4d"):t.length>12?a("\u7528\u6237\u540d\u4e0d\u80fd\u5927\u4e8e12\u4f4d"):a()},e.handleSubmit=function(t){t.preventDefault(),e.props.form.validateFields(function(){var t=Object(b.a)(v.a.mark((function t(a,n){var r,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.username,o=n.password,a?console.log("\u6821\u9a8c\u5931\u8d25"):e.props.login(r,o);case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.user;if(e&&e._id)return r.a.createElement(p.a,{to:"/home"});var t=this.props.user.errorMsg,a=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"login"},r.a.createElement("header",{className:"login-header"},r.a.createElement("img",{className:"logo",src:$.a,alt:"logo"}),r.a.createElement("h1",{className:"title"},"React\u9879\u76ee:\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf")),r.a.createElement("section",{className:"login-content",style:{position:"relative"}},r.a.createElement("h2",{style:{backgroundColor:"red",textAlign:"center",position:"absolute",left:"40%",top:0}},t),r.a.createElement("h1",null,"\u7528\u6237\u767b\u9646"),r.a.createElement(h.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(h.a.Item,null,a("username",{rules:[{required:!0,whitespace:!0,message:"\u7528\u6237\u540d\u5fc5\u987b\u8f93\u5165"},{min:4,message:"\u7528\u6237\u540d\u6700\u5c11\u4e3a4\u4f4d"},{max:12,message:"\u7528\u6237\u540d\u6700\u591a\u4e3a12\u4f4d"},{pattern:/^[a-zA-Z0-9_]+$/,message:"\u7528\u6237\u540d\u5fc5\u987b\u7531\u6570\u5b57\u3001\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf\u7ec4\u6210"}]})(r.a.createElement(f.a,{prefix:r.a.createElement(g.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u7528\u6237\u540d"}))),r.a.createElement(h.a.Item,null,a("password",{rules:[{validator:this.handleValidator}]})(r.a.createElement(f.a,{prefix:r.a.createElement(g.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6\u7801"}))),r.a.createElement(h.a.Item,null,r.a.createElement(d.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u767b\u9646")))))}}]),a}(n.Component)),te=h.a.create()(ee),ae=Object(Y.b)((function(e){return{user:e.user}}),{login:function(e,t){return function(){var a=Object(b.a)(v.a.mark((function a(n){var r,o,c;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,S(e,t);case 2:0===(r=a.sent).status?(o=r.data,H(o),n(G(o))):(c=r.msg,n({type:"show_error_msg",errorMsg:c}));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})(te),ne=(a(686),a(171)),re=a(165),oe=(a(177),a(69)),ce=(a(689),function(e){if(!e)return"";var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}),se=[{title:" \u9996\u9875",key:"/home",icon:"home",isPublic:!0},{title:" \u5546\u54c1",key:"/products",icon:"appstore",children:[{title:" \u54c1\u7c7b\u7ba1\u7406",key:"/category",icon:"bars"},{title:" \u5546\u54c1\u7ba1\u7406",key:"/product",icon:"tool"}]},{title:" \u7528\u6237\u7ba1\u7406",key:"/user",icon:"user"},{title:" \u89d2\u8272\u7ba1\u7406",key:"/role",icon:"safety"},{title:" \u56fe\u5f62\u56fe\u8868",key:"/charts",icon:"area-chart",children:[{title:" \u67f1\u5f62\u56fe",key:"/charts/bar",icon:"bar-chart"},{title:" \u6298\u7ebf\u56fe",key:"/charts/line",icon:"line-chart"},{title:" \u997c\u56fe",key:"/charts/pie",icon:"pie-chart"}]}],ie=(a(690),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("button",Object.assign({className:"link-button"},this.props),this.props.children)}}]),a}(r.a.Component)),le=oe.a.confirm,ue=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getTime=function(){n.intervalId=setInterval((function(){var e=ce(Date.now());n.setState({currentTime:e})}),1e3)},n.getWeather=Object(b.a)(v.a.mark((function e(){var t,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("\u5b9c\u7ae0");case 2:t=e.sent,a=t.dayPictureUrl,r=t.weather,n.setState({dayPictureUrl:a,weather:r});case 5:case"end":return e.stop()}}),e)}))),n.getTitle=function(){var e,t=n.props.location.pathname;return se.forEach((function(a){if(a.key===t)e=a.title;else if(a.children){var n=a.children.find((function(e){return t.startsWith(e.key)}));n&&(e=n.title)}})),e},n.loginOut=function(e){var t=Object(re.a)(n);e.preventDefault(),le({title:"\u4f60\u786e\u5b9a\u8981\u9000\u51fa\u5417?",okText:"\u786e\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){t.props.loginOut()}})},n.state={currentTime:ce(Date.now()),weather:"",dayPictureUrl:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getTime(),this.getWeather()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){var e=this.props.headerTitle,t=this.state,a=t.currentTime,n=t.weather,o=t.dayPictureUrl,c=this.props.user.username;return r.a.createElement("div",{className:"Header"},r.a.createElement("div",{className:"header-top"},r.a.createElement("span",null,"\u6b22\u8fce,",c),r.a.createElement(ie,{onClick:this.loginOut},"\u9000\u51fa")),r.a.createElement("div",{className:"header-bottom"},r.a.createElement("div",{className:"header-bottom-left"},e),r.a.createElement("div",{className:"header-bottom-right"},r.a.createElement("span",{className:"time"},a),r.a.createElement("img",{className:"imgs",src:o,alt:"img"}),r.a.createElement("span",{className:"desc"},n))))}}]),a}(n.Component),me=Object(Y.b)((function(e){return{headerTitle:e.headerTitle,user:e.user}}),{loginOut:X})(Object(p.g)(ue)),pe=(a(693),a(145)),de=a(512),he=a.n(de),fe=(a(696),pe.b.SubMenu),ge=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).hasAuth=function(t){var a=t.key,n=t.isPublic,r=e.props.user.username,o=e.props.user.role.menus;return!("admin"!==r&&!n&&!o.includes(a))||!!t.children&&!!t.children.find((function(e){return o.includes(e.key)}))},e.getMenuList=function(t){var a=e.props.history.location.pathname;return t.map((function(t){if(e.hasAuth(t))return t.children?(t.children.find((function(e){return a.startsWith(e.key)}))&&(e.openKey=t.key),r.a.createElement(fe,{key:t.key,title:r.a.createElement("span",null,r.a.createElement(g.a,{type:t.icon}),r.a.createElement("span",null,t.title))},e.getMenuList(t.children))):((t.key===a||a.startsWith(t.key))&&e.props.set_header_title(t.title),r.a.createElement(pe.b.Item,{key:t.key},r.a.createElement(m.b,{to:t.key,onClick:function(){return e.props.set_header_title(t.title)}},r.a.createElement(g.a,{type:t.icon}),r.a.createElement("span",null,t.title))))}))},e}return Object(i.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.menuList=this.getMenuList(se)}},{key:"render",value:function(){var e=this.props.history.location.pathname;e.startsWith("/product")&&(e="/product");var t=this.openKey;return r.a.createElement(n.Fragment,null,r.a.createElement(m.b,{to:"/",className:"left-nav"},r.a.createElement("img",{src:he.a,alt:""}),r.a.createElement("h1",null,"\u7845\u8c37\u540e\u53f0")),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(pe.b,{selectedKeys:[e],defaultOpenKeys:[t],mode:"inline",theme:"dark"},this.menuList)))}}]),a}(n.Component),ye=Object(Y.b)((function(e){return{user:e.user}}),{set_header_title:Q})(Object(p.g)(ge)),ve=(a(701),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"home"},"\u6b22\u8fce\u6765\u5230\u7845\u8c37\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf")}}]),a}(n.Component)),be=(a(101),a(49)),Ee=(a(237),a(117)),Oe=(a(213),a(59)),ke=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props.setForm(this.props.form)}},{key:"render",value:function(){var e=this.props,t=e.categorys,a=e.parentId,n=this.props.form.getFieldDecorator;return r.a.createElement(h.a,null,r.a.createElement(h.a.Item,null,n("parentId",{initialValue:a})(r.a.createElement(Oe.a,null,r.a.createElement(Oe.a.Option,{value:"0"},"\u4e00\u7ea7\u5206\u7c7b"),t.map((function(e){return r.a.createElement(Oe.a.Option,{key:e._id,value:e._id},e.name)}))))),r.a.createElement(h.a.Item,null,n("categoryName",{initialValue:"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8981\u6dfb\u52a0\u7684\u5185\u5bb9"}]})(r.a.createElement(f.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"}))))}}]),a}(n.Component),we=h.a.create()(ke),je=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props.setForm(this.props.form)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.categoryName;return r.a.createElement(h.a,null,r.a.createElement(h.a.Item,null,e("categoryName",{initialValue:t,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8981\u6dfb\u52a0\u7684\u5185\u5bb9"}]})(r.a.createElement(f.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"}))))}}]),a}(n.Component),Ce=h.a.create()(je),xe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getSubCategorys=function(e){n.setState({parentId:e._id,parentName:e.name},(function(){n.getCategorys()}))},n.initColumns=function(){n.columns=[{title:"\u5206\u7c7b\u7684\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u64cd\u4f5c",width:300,render:function(e){var t=n.state.parentId;return r.a.createElement("span",null,r.a.createElement(ie,{onClick:function(){return n.showUpdateCategory(e)}},"\u4fee\u6539\u5206\u7c7b"),"0"===t?r.a.createElement(ie,{onClick:function(){return n.getSubCategorys(e)}},"\u67e5\u770b\u5b50\u5206\u7c7b"):null)}}]},n.getCategorys=function(){var e=Object(b.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),t=t||n.state.parentId,e.next=4,I(t);case 4:0===(a=e.sent).status?(r=a.data,"0"===t?n.setState({categorys:r,loading:!1}):n.setState({subCategorys:r,loading:!1})):O.a.error("\u8bf7\u6c42\u6570\u636e\u51fa\u9519");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showFirstCategory=function(){n.setState({parentId:"0",parentName:"",subCategorys:[]})},n.showUpdateCategory=function(e){n.category=e,n.setState({showStatus:2})},n.updateCategory=function(){n.form.validateFields(function(){var e=Object(b.a)(v.a.mark((function e(t,a){var r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=8;break}return r=n.category._id,o=a.categoryName,e.next=5,F({categoryId:r,categoryName:o});case 5:0===e.sent.status?n.getCategorys():O.a.error("\u83b7\u53d6\u6570\u636e\u51fa\u9519"),n.handleCancel();case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.showAddCategory=function(){n.setState({showStatus:1})},n.addCategory=function(){n.form.validateFields(function(){var e=Object(b.a)(v.a.mark((function e(t,a){var r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=7;break}return r=a.parentId,o=a.categoryName,e.next=4,A({parentId:r,categoryName:o});case 4:0===e.sent.status?n.getCategorys():"0"===r?n.getCategorys("0"):O.a.error("\u83b7\u53d6\u6570\u636e\u5931\u8d25\u4e86\u3002"),n.handleCancel();case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.handleCancel=function(){n.form.resetFields(),n.setState({showStatus:0})},n.state={categorys:[],subCategorys:[],loading:!1,parentId:"0",parentName:"",showStatus:0},n}return Object(i.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getCategorys()}},{key:"render",value:function(){var e=this,t=this.state,a=t.categorys,n=t.loading,o=t.parentId,c=t.subCategorys,s=t.parentName,i=t.showStatus,l="0"===o?"\u4e00\u7ea7\u83dc\u5355\u5217\u8868":r.a.createElement("span",null,r.a.createElement(ie,{onClick:this.showFirstCategory},"\u4e00\u7ea7\u83dc\u5355\u5217\u8868"),r.a.createElement(g.a,{type:"arrow-right",style:{marginRight:5}}),s),u=r.a.createElement(d.a,{onClick:this.showAddCategory,type:"primary"},r.a.createElement(g.a,{type:"plus"}),"\u6dfb\u52a0");return r.a.createElement("div",null,r.a.createElement(be.a,{title:l,extra:u},r.a.createElement(Ee.a,{bordered:!0,rowKey:"_id",dataSource:"0"===o?a:c,columns:this.columns,loading:n,pagination:{defaultPageSize:3,showQuickJumper:!0}}),r.a.createElement(oe.a,{title:"\u6dfb\u52a0\u6570\u636e",visible:1===i,onOk:this.addCategory,onCancel:this.handleCancel},r.a.createElement(we,{categorys:a,parentId:o,setForm:function(t){e.form=t}})),r.a.createElement(oe.a,{title:"\u66f4\u65b0\u6570\u636e",visible:2===i,onOk:this.updateCategory,onCancel:this.handleCancel},r.a.createElement(Ce,{categoryName:this.category?this.category.name:"",setForm:function(t){e.form=t}}))))}}]),a}(n.Component),Se=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).updateStatus=function(){var e=Object(b.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t,a);case 2:0===e.sent.status&&O.a.success("\u66f4\u65b0\u5546\u54c1\u72b6\u6001\u6210\u529f!"),n.getProducts(n.pageNum);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.initColumns=function(){n.columns=[{title:"\u5546\u54c1\u540d\u79f0",dataIndex:"name"},{title:"\u5546\u54c1\u63cf\u8ff0",dataIndex:"desc"},{title:"\u4ef7\u683c",dataIndex:"price",render:function(e){return"\xa5"+e}},{title:"\u72b6\u6001",render:function(e){var t=e._id,a=e.status;return r.a.createElement("span",null,r.a.createElement(d.a,{type:"primary",onClick:function(){return n.updateStatus(t,1===a?2:1)},style:{marginTop:"10px"}},1===a?"\u4e0b\u67b6":"\u4e0a\u67b6"),r.a.createElement("p",{style:{textAlign:"center",marginTop:"10px"}},1===a?"\u5728\u552e":"\u5df2\u4e0b\u67b6"))}},{title:"\u64cd\u4f5c",render:function(e){return r.a.createElement("span",null,r.a.createElement(ie,{onClick:function(){return n.props.history.push("/product/detail",{product:e})}},"\u8be6\u60c5"),r.a.createElement(ie,{onClick:function(){return n.props.history.push("/product/addproduct",e)}},"\u4fee\u6539"))}}]},n.getProducts=Object(b.a)(v.a.mark((function e(){var t,a,r,o,c,s,i,l,u,m=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.length>0&&void 0!==m[0]?m[0]:1,a=m.length>1&&void 0!==m[1]?m[1]:3,n.pageNum=t,n.setState({loading:!0}),r=n.state,o=r.searchType,!(c=r.searchName)){e.next=11;break}return e.next=8,U({pageNum:t,pageSize:a,searchName:c,searchType:o});case 8:s=e.sent,e.next=14;break;case 11:return e.next=13,T(t,a);case 13:s=e.sent;case 14:n.setState({loading:!1}),0===s.status?(i=s.data,l=i.list,u=i.total,n.setState({products:l,total:u})):O.a.error("\u83b7\u53d6\u6570\u636e\u51fa\u9519\u4e86\u3002");case 16:case"end":return e.stop()}}),e)}))),n.state={products:[],total:0,loading:!1,searchName:"",searchType:"productName"},n}return Object(i.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getProducts()}},{key:"render",value:function(){var e=this,t=this.state,a=t.products,n=t.total,o=t.loading,c=t.searchName,s=t.searchType,i=Oe.a.Option,l=r.a.createElement("span",null,r.a.createElement(Oe.a,{value:s,onChange:function(t){return e.setState({searchType:t})}},r.a.createElement(i,{value:"productName"},"\u6309\u540d\u79f0\u641c\u7d22"),r.a.createElement(i,{value:"productDesc"},"\u6309\u63cf\u8ff0\u641c\u7d22")),r.a.createElement(f.a,{value:c,placeholder:"\u5173\u952e\u5b57",style:{width:150,margin:"0 10px"},onChange:function(t){e.setState({searchName:t.currentTarget.value})}}),r.a.createElement(d.a,{type:"primary",onClick:function(){return e.getProducts()}},"\u641c\u7d22")),u=r.a.createElement("span",null,r.a.createElement(d.a,{type:"primary",onClick:function(){return e.props.history.push("/product/addproduct")}},r.a.createElement(g.a,{type:"plus"}),"\u6dfb\u52a0\u5546\u54c1"));return r.a.createElement("div",null,r.a.createElement(be.a,{title:l,extra:u},r.a.createElement(Ee.a,{loading:o,bordered:!0,dataSource:a,columns:this.columns,rowKey:"_id",pagination:{current:this.pageNum,defaultPageSize:3,showQuickJumper:!0,total:n,onChange:this.getProducts}})))}}]),a}(n.Component),Ne=(a(749),a(525)),_e=a(168),Ie=a(142),Ae=a(516),Fe=a(517),Te=a.n(Fe),Ue=a(518),Me=a.n(Ue);a(839);function De(e){return new Promise((function(t,a){var n=new XMLHttpRequest;n.open("POST","/manage/img/upload");var r=new FormData;r.append("image",e),n.send(r),n.addEventListener("load",(function(){var e=JSON.parse(n.responseText).data.url;t({data:{link:e}})})),n.addEventListener("error",(function(){var e=JSON.parse(n.responseText);a(e)}))}))}var Pe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).getDetail=function(){var e=n.state.editorState;return Te()(Object(Ie.convertToRaw)(e.getCurrentContent()))},n.onEditorStateChange=function(e){n.setState({editorState:e})};var r=n.props.detail;if(r){var o=Me()(r);if(o){var c=Ie.ContentState.createFromBlockArray(o.contentBlocks),i=Ie.EditorState.createWithContent(c);n.state={editorState:i}}}else n.state={editorState:Ie.EditorState.createEmpty()};return n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.editorState;return r.a.createElement(Ae.Editor,{editorState:e,editorStyle:{border:"2px solid black",paddingLeft:10,minHeight:200},onEditorStateChange:this.onEditorStateChange,toolbar:{inline:{inDropdown:!0},list:{inDropdown:!0},textAlign:{inDropdown:!0},link:{inDropdown:!0},history:{inDropdown:!0},image:{uploadCallback:De,alt:{present:!0,mandatory:!0}}}})}}]),a}(n.Component),Re=(a(1191),a(524));function We(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var Le=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).getImgs=function(){return n.state.fileList.map((function(e){return e.name}))},n.handleCancel=function(){return n.setState({previewVisible:!1})},n.handlePreview=function(){var e=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,We(t.originFileObj);case 3:t.preview=e.sent;case 4:n.setState({previewImage:t.url||t.preview,previewVisible:!0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(){var e=Object(b.a)(v.a.mark((function e(t){var a,r,o,c,s,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.fileList,"done"!==(r=t.file).status){e.next=7;break}O.a.success("\u4e0a\u4f20\u56fe\u7247\u6210\u529f\uff01"),0===(o=r.response).status?(c=o.data,s=c.name,i=c.url,(r=a[a.length-1]).name=s,r.url=i):O.a.error("\u4e0a\u4f20\u56fe\u7247\u5931\u8d25\uff01"),e.next=12;break;case 7:if("removed"!==r.status){e.next=12;break}return e.next=10,P(r.name);case 10:0===e.sent.status?O.a.success("\u5220\u9664\u56fe\u7247\u6210\u529f\uff01"):O.a.error("\u5220\u9664\u56fe\u7247\u5931\u8d25");case 12:n.setState({fileList:a});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var r=[],o=n.props.imgs;return o&&o.length>0&&(r=o.map((function(e,t){return{uid:-t,name:e,status:"done",url:"http://localhost:5000/upload/"+e}}))),n.state={previewVisible:!1,previewImage:"",fileList:r},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,n=e.fileList,o=r.a.createElement("div",null,r.a.createElement(g.a,{type:"plus"}),r.a.createElement("div",{className:"ant-upload-text"},"Upload"));return r.a.createElement("div",{className:"clearfix"},r.a.createElement(Re.a,{action:"/manage/img/upload",listType:"picture-card",accept:"image/*",fileList:n,onPreview:this.handlePreview,onChange:this.handleChange,name:"image"},n.length>=8?null:o),r.a.createElement(oe.a,{visible:t,footer:null,onCancel:this.handleCancel},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})))}}]),a}(r.a.Component),Ve=h.a.Item,Ke=f.a.TextArea,qe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={options:[]},n.loadData=function(){var e=Object(b.a)(v.a.mark((function e(t){var a,r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t[t.length-1]).loading=!0,e.next=4,n.getCategorys(a.value);case 4:r=e.sent,a.loading=!1,r&&r.length>0?(o=r.map((function(e){return{value:e._id,label:e.name,isLeaf:!0}})),a.children=o):a.isLeaf=!0,n.setState({options:Object(_e.a)(n.state.options)});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.validatorPrice=function(e,t,a){+t>0?a():a("\u4ef7\u683c\u5fc5\u987b\u5927\u4e8e0")},n.submitHandler=function(){n.props.form.validateFields(function(){var e=Object(b.a)(v.a.mark((function e(t,a){var r,o,c,s,i,l,u,m,p;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=11;break}return r=n.photoWall.current.getImgs(),o=n.detail.current.getDetail(),c=a.categorys,s=a.desc,i=a.name,l=a.price,1===c.length?(u="0",m=c[0]):(u=c[0],m=c[1]),p={categoryId:m,pCategoryId:u,name:i,desc:s,price:l,detail:o,imgs:r},n.isUpdate&&(p._id=n.product._id),e.next=9,R(p);case 9:0===e.sent.status?(O.a.success("".concat(n.isUpdate?"\u4fee\u6539":"\u6dfb\u52a0","\u5546\u54c1\u6210\u529f\uff01")),n.props.history.goBack()):O.a.error("".concat(n.isUpdate?"\u4fee\u6539":"\u6dfb\u52a0","\u5546\u54c1\u5931\u8d25\uff01"));case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.getInitOptions=function(){var e=Object(b.a)(v.a.mark((function e(t){var a,r,o,c,s,i,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.map((function(e){return{value:e._id,label:e.name,isLeaf:!1}})),r=Object(re.a)(n),o=r.isUpdate,c=r.product,s=c.pCategoryId,!o||"0"===s){e.next=10;break}return e.next=6,n.getCategorys(s);case 6:i=e.sent,l=i.map((function(e){return{value:e._id,label:e.name,isLeaf:!0}})),a.find((function(e){return e.value===s})).children=l;case 10:n.setState({options:a});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getCategorys=function(){var e=Object(b.a)(v.a.mark((function e(t){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:if(0!==(a=e.sent).status){e.next=10;break}if(r=a.data,"0"!==t){e.next=9;break}n.getInitOptions(r),e.next=10;break;case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.photoWall=r.a.createRef(),n.detail=r.a.createRef(),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getCategorys("0")}},{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.location.state;this.isUpdate=!!e,this.product=e||{}}},{key:"render",value:function(){var e=this,t=this.isUpdate,a=this.product,n=a.categoryId,o=a.pCategoryId,c=[];t&&("0"===o?c.push(o):(c.push(o),c.push(n)));var s=r.a.createElement("span",null,r.a.createElement(ie,{onClick:function(){return e.props.history.goBack()}},r.a.createElement(g.a,{type:"arrow-left",style:{marginRight:10}}),r.a.createElement("span",null,t?"\u4fee\u6539\u5546\u54c1":"\u6dfb\u52a0\u5546\u54c1"))),i={labelCol:{span:3},wrapperCol:{span:8}},l=this.props.form.getFieldDecorator;return r.a.createElement(be.a,{title:s},r.a.createElement(h.a,i,r.a.createElement(Ve,{label:"\u5546\u54c1\u540d\u79f0"},l("name",{rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5546\u54c1\u540d\u79f0"}],initialValue:a.name})(r.a.createElement(f.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0"}))),r.a.createElement(Ve,{label:"\u5546\u54c1\u63cf\u8ff0"},l("desc",{rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5546\u54c1\u63cf\u8ff0"}],initialValue:a.desc})(r.a.createElement(Ke,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u63cf\u8ff0",autosize:{minRows:2,maxRows:10}}))),r.a.createElement(Ve,{label:"\u5546\u54c1\u4ef7\u683c"},l("price",{rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5546\u54c1\u4ef7\u683c"},{validator:this.validatorPrice}],initialValue:a.price})(r.a.createElement(f.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u4ef7\u683c",type:"number",addonAfter:"\u5143"}))),r.a.createElement(Ve,{label:"\u5546\u54c1\u5206\u7c7b"},l("categorys",{rules:[{required:!0,message:"\u5fc5\u987b\u9009\u62e9\u5546\u54c1\u5206\u7c7b"}],initialValue:c})(r.a.createElement(Ne.a,{options:this.state.options,loadData:this.loadData}))),r.a.createElement(Ve,{label:"\u5546\u54c1\u56fe\u7247"},r.a.createElement(Le,{ref:this.photoWall,imgs:a.imgs})),r.a.createElement(Ve,{label:"\u5546\u54c1\u8be6\u60c5",labelCol:{span:3},wrapperCol:{span:18}},r.a.createElement(Pe,{ref:this.detail,detail:a.detail}))),r.a.createElement(d.a,{type:"primary",onClick:this.submitHandler},"\u63d0\u4ea4"))}}]),a}(n.Component),ze=h.a.create()(qe),He=(a(880),a(337)),Be=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={cNameOne:"",cNameTwo:""},e}return Object(i.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e=Object(b.a)(v.a.mark((function e(){var t,a,n,r,o,c,s,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.location.state.product,a=t.pCategoryId,n=t.categoryId,"0"!==a){e.next=9;break}return e.next=4,M(n);case 4:r=e.sent,o=r.data.name,0===r.status&&this.setState({cNameOne:o}),e.next=15;break;case 9:return e.next=11,Promise.all([M(a),M(n)]);case 11:c=e.sent,s=c[0].data.name,i=c[1].data.name,this.setState({cNameOne:s,cNameTwo:i});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.location.state.product,a=t.name,n=t.imgs,o=t.price,c=t.desc,s=t.detail,i=He.a.Item,l=r.a.createElement("span",null,r.a.createElement(ie,{onClick:function(){return e.props.history.goBack()}},r.a.createElement(g.a,{style:{marginRight:10},type:"arrow-left"})),"\u5546\u54c1\u8be6\u60c5"),u=this.state,m=u.cNameOne,p=u.cNameTwo;return r.a.createElement(be.a,{title:l,className:"detail"},r.a.createElement(He.a,null,r.a.createElement(i,null,r.a.createElement("span",{className:"title"},"\u5546\u54c1\u540d\u79f0:"),r.a.createElement("span",{className:"content"},a)),r.a.createElement(i,null,r.a.createElement("span",{className:"title"},"\u5546\u54c1\u63cf\u8ff0:"),r.a.createElement("span",{className:"content"},c)),r.a.createElement(i,null,r.a.createElement("span",{className:"title"},"\u5546\u54c1\u4ef7\u683c:"),r.a.createElement("span",{className:"content"},o,"\u5143")),r.a.createElement(i,null,r.a.createElement("span",{className:"title"},"\u6240\u5c5e\u5206\u7c7b:"),r.a.createElement("span",{className:"content"},m," ",p?" --\x3e "+p:null)),r.a.createElement(i,null,r.a.createElement("span",{className:"title"},"\u5546\u54c1\u56fe\u7247"),r.a.createElement("span",{className:"content"},n.map((function(e){return r.a.createElement("img",{key:e,src:"http://localhost:5000/upload/"+e,alt:""})})))),r.a.createElement(i,null,r.a.createElement("span",{className:"title"},"\u5546\u54c1\u8be6\u60c5:"),r.a.createElement("span",{dangerouslySetInnerHTML:{__html:s},className:"content"}))))}}]),a}(n.Component),Je=(a(882),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/product",exact:!0,component:Se}),r.a.createElement(p.b,{path:"/product/addproduct",component:ze}),r.a.createElement(p.b,{path:"/product/detail",component:Be}),r.a.createElement(p.a,{to:"/product"})))}}]),a}(n.Component)),Qe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props.setForm(this.props.form)}},{key:"render",value:function(){var e={labelCol:{span:4},wrapperCol:{span:16}},t=this.props.form.getFieldDecorator;return r.a.createElement(h.a,e,r.a.createElement(h.a.Item,{label:"\u89d2\u8272\u540d\u79f0"},t("roleName",{initialValue:"",rules:[{required:!0,message:"\u89d2\u8272\u540d\u79f0\u5fc5\u987b\u8f93\u5165"}]})(r.a.createElement(f.a,{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"}))))}}]),a}(n.Component),Xe=h.a.create()(Qe),Ge=(a(883),a(336)),Ye=Ge.a.TreeNode,Ze=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).getAuthMenu=function(){return Object(_e.a)(n.state.checkedKeys)},n.onCheck=function(e){n.setState({checkedKeys:e})},n.initTree=function(e){return e.reduce((function(e,t){return e.push(r.a.createElement(Ye,{title:t.title,key:t.key},t.children?n.initTree(t.children):null)),e}),[])};var o=n.props.role.menus;return n.state={checkedKeys:o||[]},n}return Object(i.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.role.menus;this.setState({checkedKeys:t})}},{key:"UNSAFE_componentWillMount",value:function(){this.getTreeNode=this.initTree(se)}},{key:"render",value:function(){var e=this.props.role,t=this.state.checkedKeys,a={labelCol:{span:4},wrapperCol:{span:16}};return r.a.createElement(h.a,a,r.a.createElement(h.a.Item,{label:"\u89d2\u8272\u540d\u79f0"},r.a.createElement(f.a,{value:e.name,disabled:!0}),r.a.createElement(Ge.a,{checkable:!0,defaultExpandAll:!0,checkedKeys:t,onCheck:this.onCheck},r.a.createElement(Ye,{title:"\u5e73\u53f0\u6743\u9650",key:"all"},this.getTreeNode))))}}]),a}(n.Component),$e=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getRoles=Object(b.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/manage/role/list");case 2:0===(t=e.sent).status&&(a=t.data,n.setState({roles:a}));case 4:case"end":return e.stop()}}),e)}))),n.getColumns=function(){n.columns=[{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",render:ce},{title:"\u6388\u6743\u65f6\u95f4",dataIndex:"auth_time",render:ce},{title:"\u6388\u6743\u4eba",dataIndex:"auth_name"}]},n.addRole=function(){n.form.validateFields(function(){var e=Object(b.a)(v.a.mark((function e(t,a){var r,o,c,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=7;break}return r=a.roleName,n.form.resetFields(),e.next=5,W(r);case 5:0===(o=e.sent).status?(O.a.success("\u6dfb\u52a0\u89d2\u8272\u6210\u529f"),c=o.data,(s=Object(_e.a)(n.state.roles)).push(c),n.setState({showAdd:!1,roles:s})):O.a.error("\u6dfb\u52a0\u89d2\u8272\u5931\u8d25");case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},n.updateAuth=Object(b.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.authMenu.current.getAuthMenu(),(a=n.state.role).menus=t,a.auth_name=n.props.user.username,a.auth_time=Date.now(),e.next=7,L(a);case 7:0===e.sent.status?a._id===n.props.user.role_id?(n.props.loginOut(),O.a.success("\u5f53\u524d\u7528\u6237\u6743\u9650\u66f4\u65b0\u6210\u529f\uff0c\u8bf7\u91cd\u65b0\u767b\u9646")):(n.getRoles(),O.a.success("\u6743\u9650\u66f4\u65b0\u6210\u529f")):O.a.error("\u6743\u9650\u66f4\u65b0\u5931\u8d25"),n.setState({showAuth:!1});case 10:case"end":return e.stop()}}),e)}))),n.onRow=function(e){return{onClick:function(t){n.setState({role:e})}}},n.state={roles:[],role:{},showAdd:!1,showAuth:!1},n.authMenu=r.a.createRef(),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getRoles()}},{key:"UNSAFE_componentWillMount",value:function(){this.getColumns()}},{key:"render",value:function(){var e=this,t=this.state,a=t.roles,n=t.role,o=t.showAdd,c=t.showAuth,s=r.a.createElement("span",null,r.a.createElement(d.a,{type:"primary",onClick:function(){return e.setState({showAdd:!0})},style:{marginRight:15}},"\u521b\u5efa\u89d2\u8272"),r.a.createElement(d.a,{onClick:function(){return e.setState({showAuth:!0})},type:"primary",disabled:!n._id},"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650"));return r.a.createElement(be.a,{title:s},r.a.createElement(Ee.a,{bordered:!0,rowKey:"_id",dataSource:a,columns:this.columns,pagination:{defaultPageSize:3},rowSelection:{type:"radio",selectedRowKeys:[n._id],onSelect:function(t){return e.setState({role:t})}},onRow:this.onRow}),r.a.createElement(oe.a,{title:"\u6dfb\u52a0\u89d2\u8272",visible:o,onOk:this.addRole,onCancel:function(){return e.setState({showAdd:!1})}},r.a.createElement(Xe,{setForm:function(t){e.form=t}})),r.a.createElement(oe.a,{title:"\u8bbe\u7f6e\u89d2\u8272\u6743\u9650",visible:c,onOk:this.updateAuth,onCancel:function(){return e.setState({showAuth:!1})}},r.a.createElement(Ze,{ref:this.authMenu,role:n})))}}]),a}(n.Component),et=Object(Y.b)((function(e){return{user:e.user}}),{loginOut:X})($e),tt=h.a.Item,at=Oe.a.Option,nt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props.setForm(this.props.form)}},{key:"render",value:function(){var e={labelCol:{span:4},wrapperCol:{span:16}},t=this.props,a=t.roles,n=t.user,o=this.props.form.getFieldDecorator;return r.a.createElement(h.a,e,r.a.createElement(tt,{label:"\u7528\u6237\u540d"},o("username",{initialValue:n.username,rules:[{required:!0,message:"\u7528\u6237\u540d\u79f0\u5fc5\u987b\u8f93\u5165"}]})(r.a.createElement(f.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u79f0"}))),n._id?null:r.a.createElement(tt,{label:"\u5bc6\u7801"},o("password",{initialValue:n.password,rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u5bc6\u7801"}]})(r.a.createElement(f.a,{type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}))),r.a.createElement(tt,{label:"\u7535\u8bdd\u53f7\u7801"},o("phone",{initialValue:n.phone,rules:[{required:!0,message:"\u5fc5\u987b\u8f93\u5165\u7535\u8bdd\u53f7\u7801"}]})(r.a.createElement(f.a,{placeholder:"\u8bf7\u8f93\u5165\u7535\u8bdd\u53f7\u7801"}))),r.a.createElement(tt,{label:"\u90ae\u7bb1"},o("email",{initialValue:n.email,rules:[{required:!0,message:"\u90ae\u7bb1\u5fc5\u987b\u8f93\u5165"}]})(r.a.createElement(f.a,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"}))),r.a.createElement(tt,{label:"\u89d2\u8272"},o("role_id",{initialValue:n.role_id,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u89d2\u8272"}]})(r.a.createElement(Oe.a,null,a.map((function(e){return r.a.createElement(at,{value:e._id,key:e._id},e.name)}))))))}}]),a}(n.PureComponent),rt=h.a.create()(nt),ot=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={users:[],roles:[],isShow:!1},e.addOrUpdateUser=Object(b.a)(v.a.mark((function t(){var a,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.form.getFieldsValue(),e.form.resetFields(),!e.user){t.next=9;break}return a._id=e.user._id,t.next=6,N(a);case 6:n=t.sent,t.next=12;break;case 9:return t.next=11,N(a);case 11:n=t.sent;case 12:0===n.status&&(O.a.success("".concat(e.user?"\u4fee\u6539":"\u6dfb\u52a0","\u7528\u6237\u6210\u529f")),e.setState({isShow:!1}),e.getUsers());case 13:case"end":return t.stop()}}),t)}))),e.deltetUser=function(t){oe.a.confirm({title:"\u4f60\u786e\u5b9a\u8981\u5220\u9664".concat(t.username,"\u5417\uff1f"),onOk:function(){var a=Object(b.a)(v.a.mark((function a(){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,K(t._id);case 2:0===a.sent.status&&(O.a.success("\u5220\u9664\u7528\u6237".concat(t.username,"\u6210\u529f")),e.getUsers());case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()})},e.showUpdate=function(t){e.user=t,console.log(e.user),e.setState({isShow:!0})},e.handleCancel=function(){e.form.resetFields(),e.setState({isShow:!1})},e.getColumns=function(){e.columns=[{title:"\u7528\u6237\u540d",dataIndex:"username"},{title:"\u90ae\u7bb1",dataIndex:"email"},{title:"\u7535\u8bdd",dataIndex:"phone"},{title:"\u6ce8\u518c\u65f6\u95f4",dataIndex:"create_time",render:ce},{title:"\u6240\u5c5e\u89d2\u8272",dataIndex:"role_id",render:function(t){return e.roleNames[t]}},{title:"\u64cd\u4f5c",render:function(t){return r.a.createElement("span",null,r.a.createElement(ie,{onClick:function(){return e.showUpdate(t)}},"\u4fee\u6539"),r.a.createElement(ie,{onClick:function(){return e.deltetUser(t)}},"\u5220\u9664"))}}]},e.getRoleNames=function(t){var a=t.reduce((function(e,t){return e[t._id]=t.name,e}),{});e.roleNames=a},e.getUsers=Object(b.a)(v.a.mark((function t(){var a,n,r,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V();case 2:0===(a=t.sent).status&&(n=a.data,r=n.users,o=n.roles,e.getRoleNames(o),e.setState({users:r,roles:o}));case 4:case"end":return t.stop()}}),t)}))),e}return Object(i.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.getColumns()}},{key:"componentDidMount",value:function(){this.getUsers()}},{key:"render",value:function(){var e=this,t=this.state,a=t.users,n=t.isShow,o=t.roles,c=r.a.createElement("span",null,r.a.createElement(d.a,{type:"primary",onClick:function(){e.user=null,e.setState({isShow:!0})}},"\u521b\u5efa\u7528\u6237"));return r.a.createElement(be.a,{title:c},r.a.createElement(Ee.a,{bordered:!0,rowKey:"_id",dataSource:a,columns:this.columns,pagination:{defaultPageSize:2}}),r.a.createElement(oe.a,{title:this.user?"\u4fee\u6539\u6570\u636e":"\u6dfb\u52a0\u6570\u636e",visible:n,onOk:this.addOrUpdateUser,onCancel:this.handleCancel},r.a.createElement(rt,{user:this.user?this.user:{},roles:o,setForm:function(t){return e.form=t}})))}}]),a}(n.Component),ct=a(144),st=a.n(ct),it=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={sales:[5,20,36,10,10,20],inventorys:[15,30,46,20,20,40]},e.getOption=function(){var t=e.state;return{title:{text:"ECharts  \u5165\u95e8\u793a\u4f8b"},tooltip:{},legend:{data:[" \u9500\u91cf"," \u5e93\u5b58"]},xAxis:{data:[" \u886c\u886b"," \u7f8a\u6bdb\u886b"," \u96ea\u7eba\u886b"," \u88e4\u5b50"," \u9ad8\u8ddf\u978b"," \u889c\u5b50"]},yAxis:{},series:[{name:" \u9500\u91cf",type:"bar",data:t.sales},{name:" \u5e93\u5b58",type:"bar",data:t.inventorys}]}},e.update=function(){var t=e.state.sales.map((function(e){return e+1})),a=e.state.inventorys.map((function(e){return e-1}));e.setState({sales:t,inventorys:a})},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(be.a,null,r.a.createElement(d.a,{type:"primary",onClick:this.update},"\u66f4\u65b0")),r.a.createElement(be.a,{title:" \u67f1\u72b6\u56fe\u4e00"},r.a.createElement(st.a,{option:this.getOption(),style:{height:300}})))}}]),a}(n.Component),lt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={sales:[5,20,36,10,10,20],inventorys:[15,30,46,20,20,40]},e.getOption=function(){var t=e.state;return{title:{text:"ECharts  \u5165\u95e8\u793a\u4f8b"},tooltip:{},legend:{data:[" \u9500\u91cf"," \u5e93\u5b58"]},xAxis:{data:[" \u886c\u886b"," \u7f8a\u6bdb\u886b"," \u96ea\u7eba\u886b"," \u88e4\u5b50"," \u9ad8\u8ddf\u978b"," \u889c\u5b50"]},yAxis:{},series:[{name:" \u9500\u91cf",type:"line",data:t.sales},{name:" \u5e93\u5b58",type:"line",data:t.inventorys}]}},e.update=function(){var t=e.state.sales.map((function(e){return e+1})),a=e.state.inventorys.map((function(e){return e-1}));e.setState({sales:t,inventorys:a})},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(be.a,null,r.a.createElement(d.a,{type:"primary",onClick:this.update},"\u66f4\u65b0")),r.a.createElement(be.a,{title:"\u6298\u7ebf\u56fe\u4e00"},r.a.createElement(st.a,{option:this.getOption(),style:{height:300}})))}}]),a}(n.Component),ut=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getOption=function(){return{title:{text:" \u67d0\u7ad9\u70b9\u7528\u6237\u8bbf\u95ee\u6765\u6e90",subtext:" \u7eaf\u5c5e\u865a\u6784",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:[" \u76f4\u63a5\u8bbf\u95ee"," \u90ae\u4ef6\u8425\u9500"," \u8054\u76df\u5e7f\u544a"," \u89c6\u9891\u5e7f\u544a"," \u641c\u7d22\u5f15\u64ce"]},series:[{name:" \u8bbf\u95ee\u6765\u6e90",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:335,name:" \u76f4\u63a5\u8bbf\u95ee"},{value:310,name:" \u90ae\u4ef6\u8425\u9500"},{value:234,name:" \u8054\u76df\u5e7f\u544a"},{value:135,name:" \u89c6\u9891\u5e7f\u544a"},{value:1548,name:" \u641c\u7d22\u5f15\u64ce"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},e.getOption2=function(){return{backgroundColor:"#2c343c",title:{text:"Customized Pie",left:"center",top:20,textStyle:{color:"#ccc"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},visualMap:{show:!1,min:80,max:600,inRange:{colorLightness:[0,1]}},series:[{name:"\u8bbf\u95ee\u6765\u6e90",type:"pie",radius:"55%",center:["50%","50%"],data:[{value:335,name:" \u76f4\u63a5\u8bbf\u95ee"},{value:310,name:" \u90ae\u4ef6\u8425\u9500"},{value:274,name:" \u8054\u76df\u5e7f\u544a"},{value:235,name:" \u89c6\u9891\u5e7f\u544a"},{value:400,name:" \u641c\u7d22\u5f15\u64ce"}].sort((function(e,t){return e.value-t.value})),roseType:"radius",label:{normal:{textStyle:{color:"rgba(255, 255, 255, 0.3)"}}},labelLine:{normal:{lineStyle:{color:"rgba(255, 255, 255, 0.3)"},smooth:.2,length:10,length2:20}},itemStyle:{normal:{color:"#c23531",shadowBlur:200,shadowColor:"rgba(0, 0, 0, 0.5)"}},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]}},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(be.a,{title:"\u997c\u56fe\u4e00"},r.a.createElement(st.a,{option:this.getOption(),style:{height:300}})),r.a.createElement(be.a,{title:"\u997c\u56fe\u4e8c"},r.a.createElement(st.a,{option:this.getOption2(),style:{height:300}})))}}]),a}(n.Component),mt=(a(369),a(120)),pt=(a(370),a(64)),dt=(a(1189),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).goHome=function(){e.props.set_header_title("\u9996\u9875"),e.props.history.replace("/home")},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(mt.a,{className:"not-found"},r.a.createElement(pt.a,{span:12,className:"left"}),r.a.createElement(pt.a,{span:12,className:"right"},r.a.createElement("h1",null,"404"),r.a.createElement("h2",null,"\u62b1\u6b49\uff0c\u4f60\u8bbf\u95ee\u7684\u9875\u9762\u4e0d\u5b58\u5728"),r.a.createElement("div",null,r.a.createElement(d.a,{type:"primary",onClick:this.goHome},"\u56de\u5230\u9996\u9875"))))}}]),a}(n.Component)),ht=Object(Y.b)(null,{set_header_title:Q})(dt),ft=ne.a.Footer,gt=ne.a.Sider,yt=ne.a.Content,vt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.user;return e&&e._id?r.a.createElement(n.Fragment,null,r.a.createElement(ne.a,{style:{minHeight:"100%"}},r.a.createElement(gt,null,r.a.createElement(ye,null)),r.a.createElement(ne.a,null,r.a.createElement(me,null),r.a.createElement(yt,{style:{margin:20,backgroundColor:"#fff"}},r.a.createElement(p.d,null,r.a.createElement(p.a,{exact:!0,from:"/",to:"/home"}),r.a.createElement(p.b,{path:"/home",component:ve}),r.a.createElement(p.b,{path:"/category",component:xe}),r.a.createElement(p.b,{path:"/role",component:et}),r.a.createElement(p.b,{path:"/user",component:ot}),r.a.createElement(p.b,{path:"/product",component:Je}),r.a.createElement(p.b,{path:"/charts/bar",component:it}),r.a.createElement(p.b,{path:"/charts/pie",component:ut}),r.a.createElement(p.b,{path:"/charts/line",component:lt}),r.a.createElement(p.b,{component:ht}))),r.a.createElement(ft,{style:{textAlign:"center",color:"#ccc"}},"\u63a8\u8350\u4f7f\u7528\u8c37\u6b4c\u6d4f\u89c8\u5668,\u53ef\u4ee5\u83b7\u5f97\u66f4\u4f73\u9875\u9762\u64cd\u4f5c\u4f53\u9a8c")))):r.a.createElement(p.a,{to:"/login"})}}]),a}(n.Component),bt=Object(Y.b)((function(e){return{user:e.user}}),{})(vt),Et=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/login",component:ae}),r.a.createElement(p.b,{path:"/",component:bt})," "))}}]),a}(n.Component),Ot=a(114),kt=a(522),wt=a(335),jt=B(),Ct=Object(Ot.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"receive_user":return t.user;case"show_error_msg":var a=t.errorMsg;return Object(wt.a)(Object(wt.a)({},e),{},{errorMsg:a});case"reset_user":return{};default:return e}},headerTitle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u9996\u9875",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_header_title":return t.data;default:return e}}}),xt=a(523),St=Object(Ot.createStore)(Ct,Object(xt.composeWithDevTools)(Object(Ot.applyMiddleware)(kt.a)));B();c.a.render(r.a.createElement(Y.a,{store:St},r.a.createElement(Et,null)),document.getElementById("root"))},507:function(e,t,a){e.exports=a.p+"static/media/logo.ba1f87ec.png"},512:function(e,t,a){e.exports=a.p+"static/media/logo.ba1f87ec.png"},527:function(e,t,a){e.exports=a(1190)},611:function(e,t,a){},689:function(e,t,a){},690:function(e,t,a){},696:function(e,t,a){},701:function(e,t,a){},882:function(e,t,a){}},[[527,1,2]]]);
//# sourceMappingURL=main.c82c184f.chunk.js.map